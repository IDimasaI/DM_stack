"use strict";(self.webpackChunktreact=self.webpackChunktreact||[]).push([[635],{635:(s,e,t)=>{t.r(e),t.d(e,{Constellation_system:()=>c,Region_all:()=>a});var n=t(43),l=t(154),o=t(579);function a(){const[s,e]=(0,n.useState)([]);(0,n.useEffect)((()=>{t()}),[]);const t=async()=>{try{const s=(await l.A.get("https://cdn.jsdelivr.net/gh/IDimasaI/regions_and_IdConstellation@v2/regions.json")).data;e(s)}catch(s){console.error(s)}};return(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0432\u0441\u0435\u0445 \u0440\u0435\u0433\u0438\u043e\u043d\u043e\u0432"}),(0,o.jsxs)("ol",{children:[!s.length&&(0,o.jsx)("li",{children:"Loading"}),s.map(((s,e)=>(0,o.jsx)("div",{children:Object.keys(s).map((s=>{return(0,o.jsx)("li",{children:(0,o.jsx)("a",{href:"/Regions/"+(t=s,t.replace(/\s/g,"_")),target:"_blank",rel:"noopener noreferrer",children:s})},e);var t}))},e)))]})]})}function c(){const[s,e]=(0,n.useState)(),[t,a]=(0,n.useState)([]),[c,i]=(0,n.useState)(0),[r,h]=(0,n.useState)([]),[d,u]=(0,n.useState)([]),[p,g]=(0,n.useState)(0);(0,n.useEffect)((()=>{_()}),[]),(0,n.useEffect)((()=>{1===c&&y()}),[c]);const _=async()=>{try{const s=(await l.A.get("https://esi.evetech.net/latest/universe/system_kills")).data;a(s),i(1),console.log(s)}catch(s){console.log(s)}},y=async()=>{try{const s=document.getElementById("info"),t=(await l.A.get("https://cdn.jsdelivr.net/gh/IDimasaI/regions_and_IdConstellation@v2/regions.json")).data.filter((e=>Object.keys(e)[0]===s.value));t.length>0?t.forEach((s=>{const t=s[Object.keys(s)[0]];g(t.id);const n=t.constellations,l=t.name;console.log("\u0440\u0435\u0433\u0438\u043e\u043d"),m(n),e(l)})):console.log("\u0420\u0435\u0433\u0438\u043e\u043d \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d")}catch(s){console.error(s)}},m=async s=>{try{const e=10,n=[];for(let t=0;t<s.length;t+=e){const l=s.slice(t,t+e);n.push(l)}const o=[];for(let s=0;s<n.length;s++){const e=(await l.A.post("https://esi.evetech.net/latest/universe/names/?datasource=tranquility&language=ru","["+n[s].join(",")+"]")).data;for(let s=0;s<e.length;s++){const n=e[s],a=n.id,c=(await l.A.get("https://esi.evetech.net/latest/universe/constellations/".concat(a))).data,i={};for(const s in t){const e=t[s].system_id;c.systems.includes(e)&&(i[s]=e)}const r={};for(const s of t)r[s.system_id]=s;let h=0,d=0,u=0;for(const s of c.systems)r[s]&&(h+=r[s].npc_kills,d+=r[s].ship_kills,u+=r[s].pod_kills);const p={...n,systems:c.systems,systems_count:c.systems.length,total_kills_nps:h,total_kills_ship:d,total_kills_pod:u};o.push(p)}}h(o),console.log(o),i(0)}catch(e){console.error(e)}};function f(s){return s.replace(/\s/g,"_")}return(0,n.useEffect)((()=>{(async()=>{const s=await Promise.all(r.map((async s=>{const e=await(async(s,e)=>{try{console.log(e);const t=(await l.A.post("https://esi.evetech.net/latest/universe/names/?datasource=tranquility&language=ru",s)).data;return console.log(t),t}catch(t){return console.error(t),null}})(s.systems,p),n=e.map((s=>{const e=s.id,n=t.find((s=>s.system_id===e));return{...s,npc_kills:n?n.npc_kills:0,ship_kills:n?n.ship_kills:0,pod_kills:n?n.pod_kills:0}}));return{...s,systems:n}})));"object"===typeof s&&s.length>0&&(u(s),console.log("\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442"),console.log(s))})()}),[r]),(0,o.jsxs)("div",{children:[(0,o.jsxs)("h2",{children:["\u0420\u0435\u0433\u0438\u043e\u043d ",s]}),(0,o.jsx)("h1",{children:"\u0421\u043e\u0437\u0432\u0435\u0437\u0434\u0438\u044f"}),(0,o.jsxs)("ul",{children:[0===r.length&&(0,o.jsx)("li",{children:"Loading"}),d.map(((s,e)=>(0,o.jsxs)("div",{children:[(0,o.jsxs)("li",{children:[e+1+") "," \u0421\u043e\u0437\u0432\u0435\u0437\u0434\u0438\u0435:"," ",(0,o.jsx)("a",{href:"/constellation/"+f(s.name),target:"_blank",rel:"noopener noreferrer",children:s.name})," ",(0,o.jsx)("ul",{children:s.systems.map((s=>(0,o.jsxs)("div",{children:[(0,o.jsx)("li",{children:(0,o.jsx)("a",{href:"/System/"+f(s.name),target:"_blank",rel:"noopener noreferrer",children:s.name})}),(0,o.jsxs)("span",{children:["\u0423\u0431\u0438\u0442\u043e npc: ",s.npc_kills,", \u0423\u0431\u0438\u0442\u043e \u043a\u043e\u0440\u0430\u0431\u043b\u0435\u0439 ",s.ship_kills,", \u041a\u0430\u043f\u0441\u0443\u043b ",s.pod_kills," "]})]},s.id)))}),"\u0427\u0438\u0441\u043b\u043e \u0441\u0438\u0441\u0442\u0435\u043c: ",s.systems_count,", \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043a\u0438\u043b\u043e\u0432 npc: ",s.total_kills_nps,", \u0423\u0431\u0438\u0442\u043e \u043a\u043e\u0440\u0430\u0431\u043b\u0435\u0439: ",s.total_kills_ship,", \u043a\u0430\u043f\u0441\u0443\u043b: ",s.total_kills_pod]}),(0,o.jsx)("hr",{})]},e)))]})]})}}}]);
//# sourceMappingURL=635.1991f58e.chunk.js.map